<?php
include '../../../includes/functions.php';
include '../../../includes/config.php';
header('Last-Modified: '. $last_modified = timestamp(__FILE__));
if ($last_modified === filter_input(INPUT_SERVER, 'HTTP_IF_MODIFIED_SINCE')) header(filter_input(INPUT_SERVER, 'SERVER_PROTOCOL'). ' 304 Not Modified');
header('Content-Type: text/css; charset='. $encoding);
$bootstrap = file_get_contents('bootstrap.min.css');
if ($color)
{
	#primary
	$bootstrap = str_replace('#0d6efd', hsla($color, 0, -5), $bootstrap);
	$bootstrap = str_replace('13,110,253,', 'var(--bs-primary-rgb),', $bootstrap);
	#border, a:hover, btn-primary:hover, .btn-primary:focus .btn-primary:active, .btn-link:hover, .nav-link:hover, .nav-link:focus, .page-link:hover|focus, .link-primary:hover, .link-primary:focus
	$bootstrap = str_replace(['#0b5ed7', '#0a58ca', '#0a53be'], hsla($color, 0, 0, 1), $bootstrap);
	#.btn-primary:hover, .btn-primary:focus
	$bootstrap = str_replace(['rgba(49,132,253,.5)', 'rgba(13,110,253,.5)', 'rgba(13,110,253,.25)'], hsla($color, 0, 5, .2), $bootstrap);
	#alert-bg, .list-group-item-primary-bg .table-primary-bg
	$bootstrap = str_replace(['#cfe2ff', '#b6d4fe'], hsla($color, 0, 15), $bootstrap);
	#.alert-primary-color, .list-group-item-primary.list-group-item-action.active, input:focus
	$bootstrap = str_replace(['#084298', '#86b7fe'], hsla($color, 0, -15), $bootstrap);
	#.accordion-button:not(.collapsed)-bg
	$bootstrap = str_replace(['#e7f1ff', '#bacbe6'], hsla($color, 0, 25), $bootstrap);
	#.accordion-button:not(.collapsed)-color, .alert-primary .alert-link-color
	$bootstrap = str_replace(['#0c63e4', '%230c63e4', '#06357a'], hsla($color, -25, -20), $bootstrap);
	#dark
	$bootstrap = str_replace('#212529', '#3c3c3c', $bootstrap);

	$c = hsla($color);
	$c2 = hsla($color, 0, 0, .2);
	$c05 = hsla($color, 0, -50, .3);
	[$h, $s, $l] = explode(',', str_replace(['hsla', '(', ')', '%'], '', hsla($color, 0, -5)));
}
else
{
	$bootstrap = str_replace('#e9ecef', 'rgba(0, 0, 0, .5)', $bootstrap);
}
$serif_fonts = '';
if ('ja' === $lang)
{
	$bootstrap = str_replace('system-ui,', 'TakaoPGothic,"Noto Sans CJK JP",system-ui,', $bootstrap);
	$bootstrap = str_replace('SFMono-Regular,', 'TakaoGothic,"Noto Sans Mono CJK JP",SFMono-Regular,', $bootstrap);
	$serif_fonts = 'TakaoPMincho,"Noto Serif CJK JP",';
}
$get_categ = !filter_has_var(INPUT_GET, 'categ') ? '' : filter_input(INPUT_GET, 'categ', FILTER_CALLBACK, ['options' => 'strip_tags_basename']);
echo $bootstrap, file_get_contents('fancybox.css'), (!$color ? '' : ':root{--bs-primary-rgb:'. implode(',', hsl2rgb($h, $s, $l)). '}'), 'html{scroll-behavior:smooth;text-decoration:none}#main{min-height:calc(100vh - 200px)}#page-top svg{bottom:1em;position:fixed;right:1em;transition:all .3s linear .3s}.article{font-size:large;line-height:1.9}.badge-light{background-color:#f8f9fa}.banned{filter:grayscale(100%);opacity:.8}.bg-danger.text-danger{background-color:#f2dede!important;color:#a94442!important}.bg-info.text-info{background-color:#d9edf7!important;color:#31708f!important}.bg-success.text-success{background-color:#dff0d8!important;color:#3c763d!important}.bg-warning.text-warning{background-color:#fcf8e3!important;color:#8a6d3b!important}.border-black{border-color:#222!important}#main .card-columns,feed{column-count:2}feed *{break-inside:avoid}body,select option,feed,urlset{background-color:#dfe3e6;color:#3c3c3c}#footer{line-height:1.8;background-color:#26262E}h1,h2,h3:not(.popover-header),h4,h5,h6,.h1,.h2,.h3:not(b),.h4,.h5,.h6{font-family:'. $serif_fonts. 'serif;text-shadow:0 .05rem .04rem rgba(0,0,0,.3)}.nav-link,a{color:#6c757d;text-decoration:none}.article a:not([class]){color:var(--bs-primary)!important}.tab-content{background-color:#ffffff}.custom-file-label:after{content:"'. $custom_file_label. '"}.border-10{border-width:10px!important}.img-responsive{display:block;max-width:100%;height:auto}.lock{width:.6em;height:.7em;margin-left:.2em;background-image:url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="'. ($color ? $c : 'dimgray'). '" viewBox="0 0 4 5"%3E%3Cpath d="m0.2422 1.7224v0.0608c-0.138 0.0285-0.2422 0.1489-0.2422 0.2931v2.6248c0.000005 0.1658 0.1357 0.2989 0.3047 0.2989h3.3906c0.169 0 0.3047-0.13409 0.3047-0.29889v-2.6248c0-0.1442-0.1042-0.26466-0.2422-0.2931v-0.0608c0-0.95055-0.7888-1.7224-1.7578-1.7224-0.969 0.0000052-1.7578 0.77186-1.7578 1.7224zm1.7578-1.1227c0.631 0 1.1465 0.50276 1.1465 1.1227v0.053149h-2.293v-0.053051c0.00002-0.61995 0.5145-1.1228 1.1465-1.1228zm0 2.0974h0.00195c0.237 0 0.42969 0.18709 0.42969 0.41958 0 0.12066-0.052766 0.23003-0.13477 0.30654l0.11523 0.59584c0.006 0.033352-0.014828 0.059393-0.048828 0.059393h-0.7149c-0.034 0-0.056781-0.026041-0.050781-0.059393l0.11328-0.59201c-0.086-0.076513-0.14062-0.18678-0.14062-0.31038 0-0.23248 0.1927-0.41955 0.4297-0.41955z"%2F%3E%3C%2Fsvg%3E\');background-repeat:no-repeat}.modal,.popover,.nav-link.active{color:#555}.nav-pills .nav-link.active{border-radius:unset}.nowrap{white-space:normal}.page-top:after{content:"'. $pagetop. '";position:absolute;opacity:0;right:-2em}.page-top:hover:after{opacity:1;right:0;transition:.3s linear}.page-top:not(:hover):after{opacity:0;transition:.3s}.page-top{border-bottom:thin dotted;position:relative;text-decoration:none!important}.permit{left:.5em}.popover{max-width:70%}.popover-body{overflow:auto;max-height:200px}.similar-article{height:2rem}.sticky-top{top:10px}.toast{z-index:5!Important}.text-light{color:'. ($color ? hsla($color, -5, 20, .9) : 'inherit'). ' !Important}.user{max-width:400px}.wrap,.popover-body,.fancybox-caption__body{word-wrap:break-word;white-space:pre-wrap}a,li,.title{overflow-wrap:break-word}a:hover,a:hover img,a:hover svg,img[alt=K]{opacity:.8}img[alt=K]:hover{opacity:1}#side a.bg-light:hover,.custom-file-label,.custom-select,.form-control,.form-select,#side .bg-light.current{background-color:inherit}#side #toc .h2{font-size:1.25rem}#side div.h5:first-letter,h1.h3:first-letter,h2.h4:first-letter{font-size:125%}label:not(.active),img[alt=K]{cursor:pointer}.card-columns div{break-inside:avoid;min-width:0;overflow:hidden;will-change:transform}pre{color:#ccc}feed{line-height:2;margin:2em;text-align:center}entry{display:block;margin:1em auto;overflow-wrap:break-word;padding:1em 2em;position:relative;max-width:600px}feed title,entry title{font-size:1.3em;font-family:'. $serif_fonts. 'serif;padding:.5em}entry img{margin:1em auto;margin-bottom:0;max-width:100%}feed title,entry title,feed id,entry id,feed updated,entry updated,author,rights,generator{display:block;margin-bottom:1em}author,generator{padding:1em}urlset{display:flex;flex-wrap:wrap;justify-content:space-between}urlset:before{width:100%;border-bottom:thin solid aliceblue;text-align:center;font:normal x-large/normal '. $serif_fonts. 'serif;display:block;content:"'. $site_name. '";padding-top:1em;margin-bottom:1.5em;padding-bottom:1em}entry:hover,url:hover{background:#fff}url{margin:1.5em;width:30%;display:block;font-size:small;padding:1em;overflow-wrap:break-word}lastmod{display:block;text-align:right;margin-top:1em;white-space:nowrap}#side div[id]{margin-bottom:2rem}::selection,.highlight{background-color:'. ($color ? $c2 : '#ffffff'). ';color:'. ($color ? $c : '#000000'). '}.a{display:inline-block;cursor:pointer;margin:0 0 15px 10px}.a span{color:#ffffff;position:relative;display:block;line-height:1.4em;border-radius:2em;padding:.2em 1em;box-shadow:inset 0 1px 0 rgba(0,0,0,.2),0 1px 0 rgba(0,0,0,.1);transition:color .3s ease,padding .3s ease-in-out,background .3s ease-in-out;text-shadow:0px 1px 1px rgba(0,0,0,.4)}.a span:after{position:absolute;content:\'\';border-radius:2em;box-shadow:0px 1px 1px rgba(0,0,0,.4);width:1.3em;height:1.3em;margin-left:-1.45em;top:.25em;background:#ffffff;transition:left .3s cubic-bezier(.2,1,.3,1),background .3s ease-in-out}.a input[type="checkbox"],.pagination:first-child{display:none!important}.a input[type="checkbox"]:not(:checked)+span{background:#de474e;padding-left:1.6em;padding-right:.4em}.a input[type="checkbox"]:not(:checked)+span:after{left:1.6em}.a input[type="checkbox"]:checked+span{background:#45ce5b;padding-left:.4em;padding-right:1.6em}.a input[type="checkbox"]:checked+span:after{left:100%}.card-arrow:before{background-color:#ffffff;border-right:solid 1px rgba(0,0,0,.125);border-top:solid 1px rgba(0,0,0,.125);height:15px;transform:rotate(225deg);width:15px;content:"";display:block;left:117px;position:absolute;top:16px;z-index:1}';
if ($use_auto_wrap) echo '.article,.card-text{word-wrap:break-word;white-space:pre-wrap}.article h1,.article h2,.article h3,.article h4,.article h5,.article h6{margin-bottom:0}.article #accordion,.article .accordion,.article .btn-group,.article .card,.article .carousel,.article .custom-control,.article .custom-file,.article .form-group,.article .form-horizontal,.article .input-group,.article .list-group,.article .media,.article .modal,.article .navbar,.article .row,.article .tab-content,.article dl,.article fieldset,.article li,.article ol,.article table,.article ul{white-space:normal!important}';
else echo '.page-top{padding-top:2rem!important;margin-bottom:2rem!important}';

if (is_file($header_img = '../../../contents/'. $get_categ. '/header.jpg')
|| is_file($header_img = '../../../contents/'. $get_categ. '/header.png')
|| is_file($header_img = '../../../images/header.jpg') || is_file($header_img = 'header.jpg')
|| is_file($header_img = '../../../images/header.png') || is_file($header_img = 'header.png'))
{
	if (list (, $height) = getimagesize($header_img)) echo '#header{background-color:rgba(0,0,0,.15);height:'. $height. 'px}#header:before{background:url("'. $header_img. '") center/cover no-repeat;content:"";height:'. $height. 'px;opacity:.9;position:absolute;top:0;right:0;bottom:0;left:0}#header *{z-index:1}#main{min-height:calc(100vh - '. ($height * 2). 'px)}#footer{height:'. $height. 'px;overflow:hidden;position:relative}#footer nav a,#footer #copyright small{color:#fff!important}#footer nav,#footer #copyright{z-index:1}#page-top{z-index:2}#footer:after{bottom:0;background:url("'. $header_img. '") center/cover no-repeat;filter:brightness(.3) blur(5px);content:"";display:block;position:absolute;height:'. $height. 'px;width:100%;transform:scale(1.2)}';
}
else echo '#nav,#breadcrumb{background-color:transparent}';
if (is_file($bg_img = '../../../contents/'. $get_categ. '/background.jpg')
|| is_file($bg_img = '../../../contents/'. $get_categ. '/background.png')
|| is_file($bg_img = '../../../images/background.jpg') || is_file($bg_img = 'background.jpg')
|| is_file($bg_img = '../../../images/background.png') || is_file($bg_img = 'background.png'))
{
	echo '#TOP{position:relative}#TOP::after{background:url("'. $bg_img. '") center/cover no-repeat fixed;content:"";position:absolute;top:0;right:0;bottom:0;left:0;opacity:.35;z-index:-2}main.bg-light{--bs-bg-opacity:.5}';
}
echo '#copyright{padding:2em}@media(max-width:767px){.index{flex-direction:column}.index div{width:100%!important}#main .card-columns,feed{column-count:1}#search{text-align:center}#form .input-group-text{display:block}}';
if ($bootstrap4) echo '.badge{display:inline-block;padding:.25em .4em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.badge{transition:none}}a.badge:focus,a.badge:hover{text-decoration:none}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.badge-pill{padding-right:.6em;padding-left:.6em;border-radius:10rem}.badge-primary{color:#ffffff;background-color:#007bff}a.badge-primary:focus,a.badge-primary:hover{color:#ffffff;background-color:#0062cc}a.badge-primary.focus,a.badge-primary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.badge-secondary{color:#ffffff;background-color:#6c757d}a.badge-secondary:focus,a.badge-secondary:hover{color:#ffffff;background-color:#545b62}a.badge-secondary.focus,a.badge-secondary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.badge-success{color:#ffffff;background-color:#28a745}a.badge-success:focus,a.badge-success:hover{color:#ffffff;background-color:#1e7e34}a.badge-success.focus,a.badge-success:focus{outline:0;box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.badge-info{color:#ffffff;background-color:#17a2b8}a.badge-info:focus,a.badge-info:hover{color:#ffffff;background-color:#117a8b}a.badge-info.focus,a.badge-info:focus{outline:0;box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.badge-warning{color:#212529;background-color:#ffc107}a.badge-warning:focus,a.badge-warning:hover{color:#212529;background-color:#d39e00}a.badge-warning.focus,a.badge-warning:focus{outline:0;box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.badge-danger{color:#ffffff;background-color:#dc3545}a.badge-danger:focus,a.badge-danger:hover{color:#ffffff;background-color:#bd2130}a.badge-danger.focus,a.badge-danger:focus{outline:0;box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.badge-light{color:#212529;background-color:#f8f9fa}a.badge-light:focus,a.badge-light:hover{color:#212529;background-color:#dae0e5}a.badge-light.focus,a.badge-light:focus{outline:0;box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.badge-dark{color:#ffffff;background-color:#343a40}a.badge-dark:focus,a.badge-dark:hover{color:#ffffff;background-color:#1d2124}a.badge-dark.focus,a.badge-dark:focus{outline:0;box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.float-left{float:left!important}.float-right{float:right!important}@media (min-width:576px){.float-sm-left{float:left!important}.float-sm-right{float:right!important}.float-sm-none{float:none!important}}@media (min-width:768px){.float-md-left{float:left!important}.float-md-right{float:right!important}.float-md-none{float:none!important}}@media (min-width:992px){.float-lg-left{float:left!important}.float-lg-right{float:right!important}.float-lg-none{float:none!important}}@media (min-width:1200px){.float-xl-left{float:left!important}.float-xl-right{float:right!important}.float-xl-none{float:none!important}}.border-left{border-left:1px solid #dee2e6!important}.border-right-0{border-right:0!important}.border-left-0{border-left:0!important}.rounded-right{border-top-right-radius:.25rem!important;border-bottom-right-radius:.25rem!important}.rounded-left{border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important}.ml-0{margin-left:0!important}.ml-1{margin-left:.25rem!important}.ml-2{margin-left:.5rem!important}.ml-3{margin-left:1rem!important}.ml-4{margin-left:1.5rem!important}.ml-5{margin-left:3rem!important}.ml-auto{margin-left:auto!important}.mr-0{margin-right:0!important}.mr-1{margin-right:.25rem!important}.mr-2{margin-right:.5rem!important}.mr-3{margin-right:1rem!important}.mr-4{margin-right:1.5rem!important}.mr-5{margin-right:3rem!important}.mr-auto{margin-right:auto!important}.pl-0{padding-left:0!important}.pl-1{padding-left:.25rem!important}.pl-2{padding-left:.5rem!important}.pl-3{padding-left:1rem!important}.pl-4{padding-left:1.5rem!important}.pl-5{padding-left:3rem!important}.pr-0{padding-right:0!important}.pr-1{padding-right:.25rem!important}.pr-2{padding-right:.5rem!important}.pr-3{padding-right:1rem!important}.pr-4{padding-right:1.5rem!important}.pr-5{padding-right:3rem!important}.text-left{text-align:left!important}.text-right{text-align:right!important}';
